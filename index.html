<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kalkulator Nilai — Prediksi UTS/UAS/Tugas/Kehadiran</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#7c3aed; --muted:#9aa4b2; --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto; margin:0; background:linear-gradient(180deg,#071022 0%, #07111a 100%); color:#e6eef8; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}
    .wrap{width:100%; max-width:920px}
    header{display:flex; gap:12px; align-items:center; margin-bottom:18px}
    header h1{font-size:20px; margin:0}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:18px; box-shadow: 0 6px 24px rgba(2,6,23,0.6)}
    .grid{display:grid; gap:12px; grid-template-columns: 1fr 1fr}
    label{font-size:13px; color:var(--muted); display:block; margin-bottom:6px}
    input[type=number]{width:100%; padding:10px 12px; border-radius:8px; border:none; background:var(--glass); color:inherit}
    select{width:100%; padding:10px 12px; border-radius:8px; border:none; background:var(--glass); color:inherit; background-color:var(--card);}
    .controls{display:flex; gap:8px; align-items:center; margin-top:12px}
    button{background:var(--accent); border:none; padding:10px 14px; border-radius:10px; color:white; cursor:pointer}
    button.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06)}
    .out{margin-top:14px; padding:12px; border-radius:10px; background:rgba(0,0,0,0.2)}
    .grade{display:flex; gap:10px; align-items:center; justify-content:space-between; padding:10px; border-radius:8px; background:linear-gradient(90deg, rgba(255,255,255,0.01), transparent)}
    .grade .label{font-weight:600}
    .muted{color:var(--muted); font-size:13px}
    .small{font-size:13px}
    footer{margin-top:10px; color:var(--muted); font-size:13px}
    .warn{color:#ffb4b4}
    .ok{color:#b4ffd7}
    .impossible{color:#ff9b9b}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}
  select option:disabled {
  color: #777 !important;
  background: #eee !important;
  font-style: italic;
}

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden>
        <rect width="24" height="24" rx="6" fill="#0b1220"></rect>
        <path d="M7 12h10M7 8h6M7 16h10" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <div>
        <h1>Perkiraan Nilai Grade A → C</h1>
        <div class="muted">Kosong dianggap <strong>0</strong>. Pilih komponen yang mau dihitung.</div>
      </div>
    </header>

    <div class="card">
      <div class="grid">
        <div>
          <label for="uts">UTS (0 - 100)</label>
          <input id="uts" type="number" min="0" max="100" placeholder="Kosong = 0" />
        </div>
        <div>
          <label for="tugas">Tugas (0 - 100)</label>
          <input id="tugas" type="number" min="0" max="100" placeholder="Kosong = 0" />
        </div>
        <div>
          <label for="uas">UAS (0 - 100)</label>
          <input id="uas" type="number" min="0" max="100" placeholder="Kosong = 0 (biasanya ini yang mau dihitung)" />
        </div>
        <div>
          <label for="hadir">Kehadiran (0 - 100)</label>
          <input id="hadir" type="number" min="0" max="100" placeholder="Kosong = 0" />
        </div>
      </div>

      <div style="margin-top:12px">
        <label for="targetComp">Pilih komponen yang mau dihitung</label>
        <select id="targetComp">
          <option value="uas">UAS (40%)</option>
          <option value="uts">UTS (30%)</option>
          <option value="tugas">Tugas (20%)</option>
          <option value="hadir">Kehadiran (10%)</option>
        </select>
      </div>

      <div class="controls">
        <button id="calc">Hitung</button>
        <button id="reset" class="ghost">Reset</button>
        <div style="margin-left:auto" class="muted small">Range grade: A(85-100) → C(55-59.99)</div>
      </div>

      <div class="out" id="out">
        <div class="muted">Hasil akan tampil di sini setelah klik <strong>Hitung</strong>. Jika nilai yang dibutuhkan >100 maka dianggap <span class="impossible">mustahil</span>.</div>
      </div>

    </div>
      <div class="card" style="margin-top:14px">
        <h3 style="margin:0 0 10px 0;">Range Nilai</h3>
        <ul style="margin:0; padding-left:18px; line-height:1.6; font-size:14px;">
          <li>A : 85 – 100</li>
          <li>A- : 80 – 84</li>
          <li>B+ : 75 – 79</li>
          <li>B : 70 – 74</li>
          <li>B- : 65 – 69</li>
          <li>C+ : 60 – 64</li>
          <li>C : 55 – 59</li>
        </ul>
      </div>

    <footer>
      <div class="muted">Created by Arya Yusuf Fadilah</div>
    </footer>
  </div>

<script>
(() => {
  const weights = { uts:0.30, tugas:0.20, uas:0.40, hadir:0.10 };
  const grades = [
    {name:'A', min:85},
    {name:'A-', min:80},
    {name:'B+', min:75},
    {name:'B', min:70},
    {name:'B-', min:65},
    {name:'C+', min:60},
    {name:'C', min:55}
  ];

  const $ = id => document.getElementById(id);
  const out = $('out');

  function parseVal(id){
    const v = parseFloat($(id).value);
    if (Number.isFinite(v)) return Math.max(0, Math.min(100, v));
    return 0; // kosong dianggap 0
  }

  function round2(n){ return Math.round(n*100)/100; }

  function renderResult(targetComp){
    const vals = {
      uts: parseVal('uts'),
      tugas: parseVal('tugas'),
      uas: parseVal('uas'),
      hadir: parseVal('hadir')
    };

    // known contribution (except the target comp)
    let knownSum = 0;
    for(const k of Object.keys(weights)){
      if(k === targetComp) continue;
      knownSum += (vals[k] * weights[k]);
    }

    const compWeight = weights[targetComp];

    // Build output HTML
    let html = '';
    html += `<div style="margin-bottom:10px" class="small">Nilai yang tersedia: UTS=${vals.uts}, Tugas=${vals.tugas}, UAS=${vals.uas}, Kehadiran=${vals.hadir}. Kosong dianggap 0.</div>`;
    html += `<div style="margin-bottom:8px" class="muted small">Target komponen: <strong>${targetComp.toUpperCase()}</strong> (bobot ${compWeight*100}%).</div>`;

    for(const g of grades){
      const neededTotal = g.min; // target total nilai

      // Equation: knownSum + compValue * compWeight >= neededTotal
      // compValue >= (neededTotal - knownSum) / compWeight

      let required = (neededTotal - knownSum) / compWeight;
      required = round2(required);

      // If compWeight is 0 (shouldn't happen) or required is NaN
      if(!isFinite(required)){
        html += `<div class="grade"><div><span class="label">${g.name}</span><div class="muted small">Gak bisa dihitung (error)</div></div><div></div></div>`;
        continue;
      }

      // Clamp message
      if(required <= 0){
        html += `<div class="grade"><div><span class="label">${g.name}</span><div class="muted small">Selamat! Kamu udah tercapai (butuh ≤ 0 pada komponen ini).</div></div><div class="ok">✓</div></div>`;
      } else if(required > 100){
        html += `<div class="grade"><div><span class="label">${g.name}</span><div class="muted small impossible">Butuh ≥ ${required} → mustahil (lebih dari 100).</div></div><div class="impossible">✖</div></div>`;
      } else {
        html += `<div class="grade"><div><span class="label">${g.name}</span><div class="muted small">Butuh minimal <strong>${required}</strong> pada <strong>${targetComp.toUpperCase()}</strong>.</div></div><div class="ok">${required<=100? '⚡' : ''}</div></div>`;
      }
    }

    // Extra helpful note: show the minimal required across grades for quick glance
    // Find first achievable grade (highest) where required <= 100
    const achievable = grades.find(g => {
      const req = (g.min - knownSum)/compWeight;
      return isFinite(req) && req <= 100;
    });

    if(achievable){
      const req = round2((achievable.min - knownSum)/compWeight);
      html = `<div style="margin-bottom:8px" class="muted small">Grade tertinggi yang masih bisa dicapai: <strong>${achievable.name}</strong> — butuh ${req} pada ${targetComp.toUpperCase()} (atau kurang).</div>` + html;
    } else {
      html = `<div style="margin-bottom:8px" class="warn">Waduh... semua grade A–C butuh >100 pada komponen ${targetComp.toUpperCase()}. Kemungkinan mustahil kecuali ada kebijakan dosen.</div>` + html;
    }

    out.innerHTML = html;
  }

  $('calc').addEventListener('click', ()=>{
    const target = $('targetComp').value;
    renderResult(target);
  });

  $('reset').addEventListener('click', ()=>{
    ['uts','tugas','uas','hadir'].forEach(id=>$(id).value='');
    out.innerHTML = `<div class="muted">Reset done. Masukin nilai atau klik Hitung lagi.</div>`;
  });

  // initial
  out.innerHTML = `<div class="muted">Masukin nilai (kosong = 0) lalu pilih komponen yg mau dihitung → klik Hitung.</div>`;
})();
</script>
</body>
</html>
